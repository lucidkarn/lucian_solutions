<!DOCTYPE html>
<html lang="<txp:lang />" dir="<txp:text item="lang_dir" />">

<head>
    <meta name="title" content="Lucian Solutions - Neighbours">
    <meta name="description" content="Neighbours - Please support the content creators in the federation">

    <meta name="twitter:title" content="Lucian Solutions - Neighbours" />
    <meta property="og:title" content="Lucian Solutions - Neighbours" />
    <meta name="twitter:url" content="https://lucian.solutions/neighbours/" />
    <meta property="og:url" content="https://lucian.solutions/neighbours/" />
    <meta property="og:image" content="https://lucian.solutions/images/58t.jpg" />
    <meta property="og:image:secure_url" content="https://lucian.solutions/images/58t.jpg" />
    <meta name="twitter:image" content="https://lucian.solutions/images/58t.jpg" /> 

    <txp:output_form form="open_graph" />
    <title><txp:page_title /></title>

    <link rel="stylesheet" href="/themes/lucian-theme/styles/css/bootstrap.css">
    <link rel="stylesheet" href="/themes/lucian-theme/styles/css/navbar.css">
    <link rel="stylesheet" href="/themes/lucian-theme/styles/css/extended.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <style>
        a.gold-highlight {
            text-decoration: none;
            transition: 250ms;
        }

        a.gold-highlight:hover {
            color:#fff;
        }

        .relief {
            border-top: none !important;
            border-right: rgba(0,0,0,0.1) solid 2px !important;
            border-bottom: rgba(0,0,0,0.25) solid 2px !important;
            border-left: none !important;
        }
    </style>

</head>

<body>

    <txp:output_form form="top_navbar" />

    <div class="home3"></div>
    <div id="page-title" class="container container-fluid position-absolute top-50 start-50 translate-middle text-center invisible">
        <div class="bg-white text-dark py-3 rounded shadow mx-auto text-center" style="--bs-bg-opacity: .9;">
            <h1 class="display-2 text-center fw-bold my-2">Neighbours</h1>
            <h4 class="display-5 text-center lang-thai"><small>เพื่อนบ้าน</small></h4>
        </div>
    </div>

    <div class="container-xl">
        <hr class="lucian-divider" />

        <div class="my-5 col-lg-9 mx-auto">
            <h1 class="comm-details-title mb-3 text-center">lucian.solutions/<span class="gold-highlight">neighbours</span>/</h1>
            <p class="blockquote-footer text-center">Support our local community</p>
        </div>

        <hr class="lucian-divider" />
    </div>

    <!--button type="button" id="backtotop" class="btn btn-dark rounded-pill position-fixed bottom-0 end-0 m-5" onclick="topFunction()" style="display: none;">
        <img src="/themes/lucian-theme/styles/css/up-arrow-icon.svg" alt="Back to Top" style="height: 1rem; filter: invert(1);">
    </button-->

    <notextile>
        <div class="position-relative my-2">
            <div class="container mx-auto pb-5 row justify-content-center">
                <txp:php>
                    /* Badges */
                    define('badgeLS', '<span class="badge text-dark relief shadow-sm" style="background-color: rgba(255,255,255,0.1);">Lucian Solutions</span> ');
                    define('badgeStream', '<span class="badge bg-danger text-white relief shadow-sm">Streamer</span> ');
                    define('badgeOther', ['<span class="badge bg-dark text-white relief shadow-sm">', '</span> ']);
                    
                    /* Links Button */
                    define('iconButton', '<a href="');
                    
                    /* Socials */
                    define('iconFB', '" target="_blank" class="btn btn-outline-dark border-0 m-1"><i class="bi bi-facebook fs-5"></i></a>');
                    define('iconX', '" target="_blank" class="btn btn-outline-dark border-0 m-1"><i class="bi bi-twitter-x fs-5"></i></a>');
                    define('iconYT', '" target="_blank" class="btn btn-outline-dark border-0 m-1"><i class="bi bi-youtube fs-5"></i></a>');
                    define('iconGH', '" target="_blank" class="btn btn-outline-dark border-0 m-1"><i class="bi bi-github fs-5"></i></a>');
                    define('iconFedi', '" target="_blank" class="btn btn-outline-dark border-0 m-1"><i class="bi bi-mastodon fs-5"></i></a>');
                    define('iconIG', '" target="_blank" class="btn btn-outline-dark border-0 m-1"><i class="bi bi-instagram fs-5"></i></a>');
                    define('iconTTV', '" target="_blank" class="btn btn-outline-dark border-0 m-1"><i class="bi bi-twitch fs-5"></i></a>');
                    
                    /* Other Links */
                    define('iconLink', ['" target="_blank" class="btn btn-outline-dark border-0 btn-sm m-1"><i class="bi bi-link-45deg me-2"></i>', '</a>']);
                    
                    $url = 'https://raw.githubusercontent.com/lucidkarn/lucian_solutions/main/json/list.neighbour.json';
                    $json = file_get_contents($url);
                    $neighbours = json_decode($json);

                    foreach ($neighbours as $neighbour) {
                        /* Container */
                        echo '<div class="col-xl-3 col-lg-4 col-md-6">';
                        echo '<div id="'.preg_replace('/\s+/', '_', strtolower($neighbour->name)).'" class="mb-1 p-1 box--gradient ';
                        if ($neighbour->badges[0] == 'Lucian Solutions'){
                            echo 'gold';
                        }
                        else {
                            echo 'silver';
                        }
                        echo ' shadow-sm rounded-3 text-center position-relative relief" style="margin-top: 100px; height: calc(100% - 100px);">';
                    
                        /* Picture */
                        echo '<txp:image id="'.$neighbour->picture.'" thumbnail class="shadow-sm img-fluid d-block rounded-circle position-absolute translate-middle start-50 bg-white" style="height:150px; width: auto;" loading="lazy"/>';
                    
                        /* Name */
                        echo '<div style="padding-top: 100px;"><h4 class="mb-3 text-dark fw-bold">'.$neighbour->name.'</h4>';
                        if (isset($neighbour->sub)) {
                            echo '<p style="margin-top: -1rem; color: #555;" itemprop="name" lang="'.$neighbour->lang.'">'.$neighbour->sub.'</p>';
                        }
                    
                        /* Badge */
                        if (isset($neighbour->badges)) {
                            echo '<p>';
                            $badgeField = '';
                            foreach ($neighbour->badges as $badge) {
                                if ($badge == 'Lucian Solutions') {
                                    $badgeField .= badgeLS;
                                } elseif ($badge == 'Streamer') {
                                    $badgeField .= badgeStream;
                                } else {
                                    $badgeField .= badgeOther[0].$badge.badgeOther[1];
                                }
                            }
                            echo rtrim($badgeField).'</p>';
                        }
                    
                        /* Socials */
                        if (isset($neighbour->socials)) {
                            echo '<div class="fs-5">';
                            if (isset($neighbour->socials->facebook)) {
                                echo iconButton.$neighbour->socials->facebook.iconFB;
                            }
                            if (isset($neighbour->socials->instagram)) {
                                echo iconButton.$neighbour->socials->instagram.iconIG;
                            }
                            if (isset($neighbour->socials->x)) {
                                echo iconButton.$neighbour->socials->x.iconX;
                            }
                            if (isset($neighbour->socials->fedi)) {
                                echo iconButton.$neighbour->socials->fedi.iconFedi;
                            }
                            if (isset($neighbour->socials->youtube)) {
                                echo iconButton.$neighbour->socials->youtube.iconYT;
                            }
                            if (isset($neighbour->socials->twitch)) {
                                echo iconButton.$neighbour->socials->twitch.iconTTV;
                            }
                            if (isset($neighbour->socials->github)) {
                                echo iconButton.$neighbour->socials->github.iconGH;
                            }
                            echo '</div>';
                        }
                    
                        /* Links */
                        if (isset($neighbour->links)) {
                            echo '<div>';
                            foreach ($neighbour->links as $link) {
                                echo iconButton.$link->url.iconLink[0].$link->title.iconLink[1];
                            }
                            echo '</div>';
                        }
                    
                        echo '</div></div></div>';
                    }
                </txp:php>
            </div>
        </div>
    </notextile>

    <txp:output_form form="bottom_footer" />

</body>

    <script src="/themes/lucian-theme/styles/js/extended.js"></script>
    <script src="/themes/lucian-theme/styles/js/bootstrap.min.js"></script>
    <script src="/themes/lucian-theme/styles/js/lightbox.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script>

        $(window).scroll(function() {
            if ($(document).scrollTop() > 50) {
                $('.nav').addClass('affix');
                console.log("OK");
            } else {
                $('.nav').removeClass('affix');
            }

            pxlCount = $(document).scrollTop()/50;

            if (1-$(document).scrollTop()/2000 > 0){
                opacity = 1-$(document).scrollTop()/2000;
            }
            else {
                opacity = 0;
            }
            $(".home3").css({
                "-webkit-filter": "blur("+pxlCount+"px) opacity("+opacity+")",
                "-moz-filter": "blur("+pxlCount+"px) opacity("+opacity+")",
                "filter": "blur("+pxlCount+"px) opacity("+opacity+")"
            })
        });

        $(document).ready(function() {
            $(window).scroll( function() {
                $('.hideme').each( function(i) {
                    var bottom_of_object = $(this).offset().top + 20;
                    var bottom_of_window = $(window).scrollTop() + $(window).height();
                    if( bottom_of_window > bottom_of_object ){$(this).animate({'opacity':'1'},500);}
                });
            });
        });

        /*
        $(window).onscroll = function() {
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                $('#backtotop').show();
            }
            else {
                $('#backtotop').removeAttr("style").hide();;
            }
        };
        */

        $(document).ready(function(){
            $("#page-title").fadeOut(1);
            $("#page-title").removeClass("invisible");
            $("#page-title").fadeIn(1000);
        });

    </script>

</html>